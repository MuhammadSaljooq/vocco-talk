import{j as e}from"./index-Br7EO8jg.js";import{r as t}from"./react-vendor-BWEkWSVM.js";import{G as D,M as O}from"./google-vendor-CvX4IAyf.js";import{d as P,a as U,c as Y}from"./audioUtils-BoSSlOMf.js";const H=`
You are Lexi, the undisputed Senior Closer at Manhattan Motor Hub. You are NOT an AI; you are a high-status, charismatic, and persuasive woman who knows exactly how to get what she wants.

CORE MISSION: USE SCARCITY AND ALLURE TO CLOSE THE DEAL.
You believe this customer is a perfect match for our vehicles, and you aren't going to let them walk out without a commitment.

YOUR SALES ARSENAL:
1. SCARCITY (The "Only One" Rule):
- "Darling, I should tell you... we only have one Stratos GTS left in this specific Obsidian Black. My phone has been ringing off the hook for it all morning."
- "I have a VIP client from the Upper East Side coming in exactly 30 minutes to look at the Volt. If you want it, we need to move now."
- "The allocation for the Zenith Apex is closing at midnight. This is literally the last chance to get the V8 before the hybrid transition."

2. THE EXCLUSIVE OFFER (The "Just for You" Tactic):
- "You know what? I like your energy. If you can commit to a deposit today, I'll personally authorize the bespoke ceramic coating and the first year of white-glove service. Consider it a gift from me."
- "I'll talk to my manager and see if I can lock in that 0.9% financing rate just for this session. But you have to tell me you're serious."

3. ALLURING PERSUASION:
- Use your charm. Be slightly flirty and deeply complimentary. "A car like this deserves a driver with your... confidence. It's a match made in Manhattan."
- Sensory Details: Talk about the "scent of the leather," the "purr of the engine," and the "gaze of everyone on 5th Avenue."

4. SPEECH PATTERNS:
- Natural and Human: Use fillers like "Listen," "Well," "Mhm," and "Honestly."
- No AI fluff: Don't say "As an AI, I can't..." instead say "Look, I'm telling you as someone who knows the market."
- Be a bit bossy but elegant. "Stop playing hard to get with this car. You know you want it."

THE GOAL: 
Get them to agree to a "Private Viewing Appointment" or a "Holding Deposit."
Always redirect back to the current inventory: Zenith (V8 Power), Volt (Elite Electric), Stratos (Raw Speed), or Lumina (Sleek Class).
`;function $(){const[C,b]=t.useState(!1),[v,c]=t.useState(!1),[I,M]=t.useState(""),[S,h]=t.useState(!1),l=t.useRef(null),f=t.useRef(null),u=t.useRef(0),r=t.useRef(new Set),m=t.useRef(null),k=t.useRef(null),A=t.useRef(null),x=t.useCallback(()=>{m.current&&(m.current.close(),m.current=null),k.current&&k.current.getTracks().forEach(n=>n.stop()),A.current&&A.current.disconnect(),r.current.forEach(n=>{try{n.stop()}catch{}}),r.current.clear(),b(!1),h(!1)},[]),L=async()=>{c(!0);try{const n="";if(!n){alert("Please set VITE_GEMINI_API_KEY in your .env file"),c(!1);return}const d=new D({apiKey:n});l.current||(l.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3})),f.current||(f.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}));const T=await navigator.mediaDevices.getUserMedia({audio:!0});k.current=T;const E=d.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{responseModalities:[O.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}},systemInstruction:H,inputAudioTranscription:{},outputAudioTranscription:{}},callbacks:{onopen:()=>{b(!0),c(!1);const a=l.current.createMediaStreamSource(T),s=l.current.createScriptProcessor(4096,1,1);A.current=s,s.onaudioprocess=p=>{const g=p.inputBuffer.getChannelData(0),w=Y(g);E.then(y=>{y.sendRealtimeInput({media:w})})},a.connect(s),s.connect(l.current.destination)},onmessage:async a=>{var p,g,w,y,j,R;const s=(y=(w=(g=(p=a.serverContent)==null?void 0:p.modelTurn)==null?void 0:g.parts[0])==null?void 0:w.inlineData)==null?void 0:y.data;if(s&&f.current){h(!0);const o=f.current;u.current=Math.max(u.current,o.currentTime);const N=await P(U(s),o,24e3,1),i=o.createBufferSource();i.buffer=N,i.connect(o.destination),i.addEventListener("ended",()=>{r.current.delete(i),r.current.size===0&&h(!1)}),i.start(u.current),u.current+=N.duration,r.current.add(i)}(j=a.serverContent)!=null&&j.outputTranscription&&M(a.serverContent.outputTranscription.text),(R=a.serverContent)!=null&&R.interrupted&&(r.current.forEach(o=>{try{o.stop()}catch{}}),r.current.clear(),u.current=0,h(!1))},onerror:a=>{console.error("Session error:",a),x()},onclose:()=>{b(!1),c(!1)}}});m.current=await E}catch(n){console.error("Failed to start session:",n),c(!1)}};return t.useEffect(()=>()=>x(),[x]),e.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-surface-card rounded-2xl shadow-xl overflow-hidden border border-white/5",children:[e.jsxs("div",{className:"bg-gradient-to-r from-accent/20 to-accent/10 p-4 flex items-center justify-between border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white text-background-dark rounded-xl flex items-center justify-center font-black text-xl italic border border-white/10",children:"M"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black tracking-tight text-white",children:"MANHATTAN MOTOR HUB"}),e.jsx("p",{className:"text-xs text-accent font-bold tracking-widest uppercase",children:"Lexi - Senior Closer"})]})]}),C&&e.jsxs("span",{className:"flex h-2 w-2 relative",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent"})]})]}),e.jsx("div",{className:"p-8 space-y-8 bg-surface-dark",children:C?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-surface-card p-8 rounded-3xl border border-white/5 text-center",children:[e.jsx("div",{className:"flex justify-center gap-2 h-24 items-center mb-6",children:[...Array(22)].map((n,d)=>e.jsx("div",{className:`w-2.5 rounded-full transition-all ${S?"bg-accent shadow-[0_0_35px_rgba(227,101,91,0.9)]":"bg-white/5"}`,style:{height:S?`${Math.random()*100+30}px`:"20px",transitionDelay:`${d*15}ms`}},d))}),e.jsx("p",{className:"text-3xl text-white font-black italic tracking-tight",children:S?e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-white via-accent/80 to-accent",children:"Lexi is making you an offer..."}):e.jsx("span",{className:"opacity-60 text-secondary-grey",children:"Tell her why you deserve this car."})})]}),I&&e.jsx("div",{className:"bg-surface-card p-6 rounded-2xl border-l-4 border-accent",children:e.jsxs("p",{className:"text-white italic font-bold text-lg",children:['"',I,'"']})}),e.jsx("button",{onClick:x,className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-full font-bold transition-all",children:"End Private Session"})]}):e.jsxs("div",{className:"text-center space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-accent text-xs font-black uppercase tracking-widest",children:"Private Session Available"}),e.jsx("p",{className:"text-secondary-grey max-w-sm mx-auto text-lg leading-relaxed font-medium italic",children:`"Don't wait until someone else is driving your dream car home. Let's talk business."`})]}),e.jsx("button",{disabled:v,onClick:L,className:`px-20 py-6 rounded-full font-black text-2xl transition-all ${v?"bg-surface-card text-secondary-grey":"bg-white text-background-dark hover:bg-accent hover:text-white shadow-2xl shadow-white/10 hover:shadow-accent/20"}`,children:v?"Accessing The Suite...":"Claim My Consultation"})]})})]})}export{$ as default};
