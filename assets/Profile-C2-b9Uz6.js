import{b as H,h as K,j as e,u as I,i as L,k as E}from"./index-DPr9HexU.js";import{r as i}from"./react-vendor-BWEkWSVM.js";import{g as R}from"./agentStorage-BY7jVOO5.js";const U="vocco_talk_cost_tracking";function v(){try{const a=localStorage.getItem(U);return a?JSON.parse(a):{daily:{},monthly:{},total:{apiCalls:0,voiceMinutes:0,cost:0}}}catch(a){return console.error("Error loading cost data:",a),{daily:{},monthly:{},total:{apiCalls:0,voiceMinutes:0,cost:0}}}}function b(){const a=v(),t=new Date().toISOString().split("T")[0];return a.daily[t]||{apiCalls:0,voiceMinutes:0,cost:0,tokens:{input:0,output:0}}}function y(){const a=v(),t=new Date,o=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;return a.monthly[o]||{apiCalls:0,voiceMinutes:0,cost:0,tokens:{input:0,output:0}}}function g(){return v().total}function B({user:a}){var w,k;const[t,o]=i.useState(a),[n,A]=i.useState("profile"),[d,m]=i.useState(""),[h,u]=i.useState(!1),[x,C]=i.useState([]),[P,S]=i.useState([]),[f,j]=i.useState(!1),[p,l]=i.useState("");i.useEffect(()=>{const s=H(t.id);s&&(m(s.substring(0,10)+"..."),u(!1)),N(),D()},[t.id]);const N=()=>{const s=K(t.id);C(s)},D=()=>{const s=R();S(s)},M=async s=>{s.preventDefault(),j(!0),l("");try{const r=I(t.id,{name:t.name,preferences:t.preferences});o(r),l("Profile updated successfully!"),setTimeout(()=>l(""),3e3)}catch{l("Failed to update profile")}finally{j(!1)}},Z=()=>{if(!d||d.length<10){l("Please enter a valid API key");return}try{L(t.id,d),l("API key saved successfully!"),m(d.substring(0,10)+"..."),u(!1),setTimeout(()=>l(""),3e3)}catch{l("Failed to save API key")}},G=s=>{confirm("Are you sure you want to delete this conversation?")&&(E(s),N())},T=s=>new Date(s).toLocaleString();return e.jsxs("div",{className:"relative pt-32 pb-20 w-full min-h-screen bg-background-dark",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] rounded-full bg-primary/5 blur-[120px] mix-blend-screen animate-pulse-slow"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTTAgNDBWMGg0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=')] opacity-[0.03] mix-blend-overlay"})]}),e.jsxs("div",{className:"relative z-10 max-w-[1200px] mx-auto px-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight text-white mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-lg text-secondary-grey",children:"Manage your account, API keys, and privacy settings"})]}),p&&e.jsx("div",{className:`mb-6 p-4 rounded-xl border ${p.includes("success")?"bg-primary/10 border-primary/30 text-primary":"bg-accent/10 border-accent/30 text-accent"}`,children:p}),e.jsx("div",{className:"flex gap-2 mb-8 border-b border-white/5 overflow-x-auto",children:[{id:"profile",label:"Profile",icon:"person"},{id:"api",label:"API Keys",icon:"key"},{id:"history",label:"Conversations",icon:"history"},{id:"privacy",label:"Privacy",icon:"lock"},{id:"costs",label:"Costs",icon:"attach_money"}].map(s=>e.jsxs("button",{onClick:()=>A(s.id),className:`px-6 py-3 font-medium transition-all border-b-2 ${n===s.id?"text-primary border-primary":"text-secondary-grey border-transparent hover:text-white hover:border-white/20"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm align-middle mr-2",children:s.icon}),s.label]},s.id))}),n==="profile"&&e.jsxs("div",{className:"bg-surface-card rounded-2xl p-8 border border-white/5",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Account Information"}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t.email,disabled:!0,className:"w-full px-4 py-3 bg-surface-dark border border-white/10 rounded-xl text-white opacity-60 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-secondary-grey",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>o({...t,name:s.target.value}),className:"w-full px-4 py-3 bg-surface-dark border border-white/10 rounded-xl text-white focus:outline-none focus:ring-2 focus:border-primary focus:ring-primary/50 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Account Created"}),e.jsx("input",{type:"text",value:new Date(t.createdAt).toLocaleDateString(),disabled:!0,className:"w-full px-4 py-3 bg-surface-dark border border-white/10 rounded-xl text-white opacity-60 cursor-not-allowed"})]}),e.jsx("button",{type:"submit",disabled:f,className:"h-12 px-8 rounded-full bg-primary hover:bg-primary-glow text-white font-bold transition-all shadow-[0_0_20px_-5px_rgba(91,140,90,0.3)] hover:scale-105 disabled:opacity-50",children:f?"Saving...":"Save Changes"})]})]}),n==="api"&&e.jsxs("div",{className:"bg-surface-card rounded-2xl p-8 border border-white/5",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"API Key Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-secondary-grey mb-2",children:"Your API key is stored securely and used for voice agent interactions. Never share your API key publicly."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Google Gemini API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:h?"text":"password",value:d,onChange:s=>m(s.target.value),placeholder:"Enter your API key",className:"flex-1 px-4 py-3 bg-surface-dark border border-white/10 rounded-xl text-white placeholder-secondary-grey focus:outline-none focus:ring-2 focus:border-primary focus:ring-primary/50 transition-all font-mono"}),e.jsx("button",{onClick:()=>u(!h),className:"px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white hover:bg-white/10 transition-all",children:e.jsx("span",{className:"material-symbols-outlined",children:h?"visibility_off":"visibility"})})]}),e.jsxs("p",{className:"mt-2 text-xs text-secondary-grey",children:["Get your API key from"," ",e.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google AI Studio"})]})]}),e.jsx("button",{onClick:Z,className:"h-12 px-8 rounded-full bg-primary hover:bg-primary-glow text-white font-bold transition-all shadow-[0_0_20px_-5px_rgba(91,140,90,0.3)] hover:scale-105",children:"Save API Key"})]})]}),n==="history"&&e.jsxs("div",{className:"bg-surface-card rounded-2xl p-8 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Conversation History"}),e.jsxs("div",{className:"text-sm text-secondary-grey",children:[x.length," conversation",x.length!==1?"s":""]})]}),x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-secondary-grey mb-4",children:"history"}),e.jsx("p",{className:"text-secondary-grey",children:"No conversations yet"})]}):e.jsx("div",{className:"space-y-4",children:x.map(s=>{const r=P.find(c=>c.id===s.agentId);return e.jsxs("div",{className:"bg-surface-dark rounded-xl p-6 border border-white/5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold mb-1",children:(r==null?void 0:r.agentName)||"Unknown Agent"}),e.jsxs("p",{className:"text-xs text-secondary-grey",children:[T(s.createdAt)," • ",s.messages.length," messages"]})]}),e.jsx("button",{onClick:()=>G(s.id),className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-accent text-sm",children:"delete"})})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.messages.slice(0,3).map((c,_)=>e.jsxs("div",{className:`text-sm ${c.sender==="user"?"text-primary":"text-secondary-grey"}`,children:[e.jsxs("span",{className:"font-medium",children:[c.sender==="user"?"You":"Agent",":"]})," ",c.text.substring(0,100),"..."]},_))})]},s.id)})})]}),n==="costs"&&e.jsxs("div",{className:"bg-surface-card rounded-2xl p-8 border border-white/5",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"API Cost Tracking"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-secondary-grey",children:[e.jsx("span",{className:"material-symbols-outlined text-xs align-middle mr-1",children:"info"}),"Cost tracking helps monitor Gemini API usage during development. Costs are estimated based on API calls and voice minutes."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-surface-dark rounded-xl p-6 border border-white/5",children:[e.jsx("div",{className:"text-xs text-secondary-grey mb-2",children:"Today"}),e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",b().cost.toFixed(4)]}),e.jsxs("div",{className:"text-xs text-secondary-grey",children:[b().apiCalls," calls • ",b().voiceMinutes.toFixed(1)," min"]})]}),e.jsxs("div",{className:"bg-surface-dark rounded-xl p-6 border border-white/5",children:[e.jsx("div",{className:"text-xs text-secondary-grey mb-2",children:"This Month"}),e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",y().cost.toFixed(4)]}),e.jsxs("div",{className:"text-xs text-secondary-grey",children:[y().apiCalls," calls • ",y().voiceMinutes.toFixed(1)," min"]})]}),e.jsxs("div",{className:"bg-surface-dark rounded-xl p-6 border border-white/5",children:[e.jsx("div",{className:"text-xs text-secondary-grey mb-2",children:"Total"}),e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["$",g().cost.toFixed(4)]}),e.jsxs("div",{className:"text-xs text-secondary-grey",children:[g().apiCalls," calls • ",g().voiceMinutes.toFixed(1)," min"]})]})]}),e.jsxs("div",{className:"bg-surface-dark rounded-xl p-4 border border-white/5",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Pricing Reference"}),e.jsxs("div",{className:"space-y-2 text-xs text-secondary-grey",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"API Call"}),e.jsx("span",{className:"text-white",children:"$0.0001"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Voice Minute"}),e.jsx("span",{className:"text-white",children:"$0.01"})]})]})]})]})]}),n==="privacy"&&e.jsxs("div",{className:"bg-surface-card rounded-2xl p-8 border border-white/5",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Privacy Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-3",children:"Conversation History Storage"}),e.jsxs("select",{value:((w=t.preferences)==null?void 0:w.privacyLevel)||"standard",onChange:s=>{const r={...t,preferences:{...t.preferences,privacyLevel:s.target.value}};I(t.id,r.preferences),o(r)},className:"w-full px-4 py-3 bg-surface-dark border border-white/10 rounded-xl text-white focus:outline-none focus:ring-2 focus:border-primary focus:ring-primary/50 transition-all",children:[e.jsx("option",{value:"standard",children:"Standard - Store conversation history"}),e.jsx("option",{value:"enhanced",children:"Enhanced - Store minimal metadata only"}),e.jsx("option",{value:"maximum",children:"Maximum - Do not store conversations"})]}),e.jsx("p",{className:"mt-2 text-xs text-secondary-grey",children:((k=t.preferences)==null?void 0:k.privacyLevel)==="maximum"?"Conversations will not be saved. This cannot be undone.":"Conversation history helps improve your experience and analytics."})]}),e.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-secondary-grey",children:[e.jsx("span",{className:"material-symbols-outlined text-sm align-middle mr-1",children:"info"}),"Your data is stored locally in your browser. In production, data would be encrypted and stored securely on our servers."]})})]})]})]})]})}export{B as default};
